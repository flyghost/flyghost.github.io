---
title: 低通滤波（一阶）
tags:
  - 无人机
originContent: ''
categories:
  - 无人机
toc: false
abbrlink: 3dbc53de
date: 2016-07-13 20:02:09
---

**1. 一阶滤波算法的原理** 
一阶滤波，又叫一阶惯性滤波，或一阶低通滤波。是使用软件编程实现普通硬件RC低通滤波器的功能。 
一阶低通滤波的算法公式为：
                         Y(n)=(1-α) * Y(n-1) + αX(n) 
  式中：α=滤波系数；X(n)=本次采样值；Y(n-1)=上次滤波输出值；Y(n)=本次滤波输出值。 
一阶低通滤波法采用本次采样值与上次滤波输出值进行加权，得到有效滤波值，使得输出对输入有反馈作用。
 **2. 一阶滤波算法的程序（适用于单个采样）**


```
#define a   0.01                // 滤波系数a（0-1）  
 
char value;                    //滤波后的值 

//输入：新的采样值
//输出：滤波后的值
char filter(char new_value)   
{     
    return （1-a）*value + a*new_value;  
}  
```
**3. 一阶滤波算法的不足** 

1. 关于灵敏度和平稳度的矛盾 
   
      滤波系数越小，滤波结果越平稳，但是灵敏度越低；
      滤波系数越大，灵敏度越高，但是滤波结果越不稳定。

     一阶滤波无法完美地兼顾灵敏度和平稳度。有时，我们只能寻找一个平衡，在可接受的灵敏度范围内取得尽可能好的平稳度。而在一些场合，我们希望拥有这样一种接近理想状态的滤波算法。即：
     当数据快速变化时，滤波结果能及时跟进（灵敏度优先）；
     当数据趋于稳定，在一个固定的点上下振荡时，滤波结果能趋于平稳（平稳度优先）。

2. 关于小数舍弃带来的误差 

   一阶滤波算法有一个鲜为人知的问题：小数舍弃带来的误差。 比如： 本次采样值=25，上次滤波结果=24，滤波系数=10， 根据滤波算法:
      本次滤波结果=(25*10+24*(256-10))/256=24.0390625 
   但是，我们在单片机运算中，很少采用浮点数。因此运算后的小数部分要么舍弃，要么进行四舍五入运算。这样一来，本例中的结果24.0390625就变成了24。假如每次采样值都=25，那么滤波结果永远=24。也就是说滤波结果和实际数据一直存在无法消除的误差